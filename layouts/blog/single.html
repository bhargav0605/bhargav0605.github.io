{{ define "title" }}{{ .Title }} — {{ .Site.Title }}{{ end }}

{{ define "og-title" }}{{ .Title }}{{ end }}

{{ define "main" }}

<!-- Schema.org Structured Data for SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ .Title }}",
  "description": "{{ if .Params.summary }}{{ .Params.summary }}{{ else }}{{ .Summary }}{{ end }}",
  "author": {
    "@type": "Person",
    "name": "{{ .Site.Params.author }}",
    "url": "{{ .Site.BaseURL }}",
    "sameAs": [
      "https://github.com/{{ .Site.Params.social.github }}",
      "https://linkedin.com/in/{{ .Site.Params.social.linkedin }}",
      "https://twitter.com/{{ .Site.Params.social.twitter }}"
    ]
  },
  "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
  "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",
  "publisher": {
    "@type": "Person",
    "name": "{{ .Site.Params.author }}",
    "url": "{{ .Site.BaseURL }}"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink }}"
  },
  {{ if .Params.image }}
  "image": "{{ .Params.image | absURL }}",
  {{ end }}
  {{ if .Params.tags }}
  "keywords": "{{ delimit .Params.tags ", " }}",
  {{ end }}
  "url": "{{ .Permalink }}",
  "inLanguage": "en-US"
}
</script>

<!-- Breadcrumb Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ .Site.BaseURL }}"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Blog",
      "item": "{{ "blog/" | absURL }}"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "{{ .Title }}",
      "item": "{{ .Permalink }}"
    }
  ]
}
</script>

<!-- Blog Post Single Page -->
<article style="background: var(--bg-light); padding-top: 120px; padding-bottom: 100px; min-height: 100vh;">
  <div class="section-inner" style="max-width: 800px;">

    <!-- Breadcrumbs -->
    <nav aria-label="Breadcrumb" style="margin-bottom: 24px;">
      <ol style="display: flex; align-items: center; gap: 8px; list-style: none; padding: 0; margin: 0; font-size: 13px; color: #777;">
        <li><a href="{{ "/" | relURL }}" style="color: #777; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#111'" onmouseout="this.style.color='#777'">Home</a></li>
        <li style="color: #ccc;">›</li>
        <li><a href="{{ "blog/" | relURL }}" style="color: #777; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#111'" onmouseout="this.style.color='#777'">Blog</a></li>
        <li style="color: #ccc;">›</li>
        <li style="color: #111; font-weight: 500;">{{ .Title }}</li>
      </ol>
    </nav>

    <!-- Post Header -->
    <header style="margin-bottom: 48px;">
      <div style="font-size: 12px; text-transform: uppercase; letter-spacing: 2px; color: var(--dim-light); font-weight: 600; margin-bottom: 16px;">
        {{ .Date.Format "January 2, 2006" }}
        {{ if .Params.readingTime }} · {{ .Params.readingTime }} min read{{ end }}
      </div>
      <h1 style="font-size: clamp(32px, 5vw, 48px); font-weight: 800; line-height: 1.15; letter-spacing: -1.5px; margin-bottom: 20px;">
        {{ .Title }}
      </h1>
      {{ if .Params.summary }}
      <p style="font-size: 17px; color: #555; line-height: 1.8; max-width: 650px;">
        {{ .Params.summary }}
      </p>
      {{ end }}
      {{ if .Params.tags }}
      <div style="margin-top: 20px; display: flex; gap: 8px; flex-wrap: wrap;">
        {{ range .Params.tags }}
        <span style="font-size: 12px; padding: 4px 12px; background: #f0f0f0; border-radius: 100px; color: #555; font-weight: 500;">
          {{ . }}
        </span>
        {{ end }}
      </div>
      {{ end }}

      <!-- Featured Image (Hashnode-style) -->
      {{ if .Params.image }}
      <div style="margin-top: 32px; margin-bottom: 32px;">
        <img src="{{ .Params.image | relURL }}" alt="{{ .Title }}" style="width: 100%; height: auto; border-radius: 8px; object-fit: cover; max-height: 450px;">
      </div>
      {{ end }}
    </header>

    <!-- Post Content -->
    <div class="blog-content" style="font-size: 16px; line-height: 1.9; color: #333;">
      {{ .Content }}
    </div>

    <!-- Post Footer -->
    <footer style="margin-top: 60px; padding-top: 40px; border-top: 1px solid var(--border-light);">
      <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px;">
        <div>
          <p style="font-size: 13px; color: #777; margin-bottom: 8px;">Share this post</p>
          <div style="display: flex; gap: 12px;">
            <a href="https://twitter.com/intent/tweet?text={{ .Title }}&url={{ .Permalink }}" target="_blank" rel="noopener noreferrer" class="social-btn" aria-label="Share on Twitter">
              <i class="devicon-twitter-original"></i>
            </a>
            <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ .Permalink }}" target="_blank" rel="noopener noreferrer" class="social-btn" aria-label="Share on LinkedIn">
              <i class="devicon-linkedin-plain"></i>
            </a>
          </div>
        </div>
        <div>
          <a href="{{ "blog/" | relURL }}" class="btn-dark" style="font-size: 13px; padding: 10px 24px;">← All Posts</a>
        </div>
      </div>
    </footer>

  </div>
</article>

<!-- Additional CSS for blog content -->
<style>
.blog-content h2 {
  font-size: 28px;
  font-weight: 700;
  margin-top: 48px;
  margin-bottom: 16px;
  letter-spacing: -0.5px;
}

.blog-content h3 {
  font-size: 22px;
  font-weight: 600;
  margin-top: 36px;
  margin-bottom: 14px;
}

.blog-content p {
  margin-bottom: 20px;
}

.blog-content ul, .blog-content ol {
  margin-left: 24px;
  margin-bottom: 20px;
}

.blog-content li {
  margin-bottom: 8px;
}

.blog-content a {
  color: #111;
  font-weight: 500;
  border-bottom: 1px solid var(--border-light);
  transition: border-color 0.2s;
}

.blog-content a:hover {
  border-color: #111;
}

.blog-content pre {
  position: relative;
  background: #1a1a1a;
  color: #fff;
  padding: 20px;
  padding-top: 45px;
  border-radius: 8px;
  overflow-x: auto;
  margin-bottom: 24px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 14px;
  line-height: 1.6;
}

.copy-code-button {
  position: absolute;
  top: 8px;
  right: 8px;
  padding: 6px 12px;
  font-size: 12px;
  font-weight: 500;
  color: #aaa;
  background: #2a2a2a;
  border: 1px solid #444;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s;
  font-family: 'Sora', sans-serif;
}

.copy-code-button:hover {
  background: #333;
  color: #fff;
  border-color: #666;
}

.copy-code-button.copied {
  background: #1a7f37;
  color: #fff;
  border-color: #1a7f37;
}

.blog-content code {
  font-family: 'JetBrains Mono', monospace;
  font-size: 14px;
  background: #f5f5f5;
  padding: 2px 6px;
  border-radius: 4px;
}

.blog-content pre code {
  background: transparent;
  padding: 0;
}

.blog-content blockquote {
  border-left: 3px solid #111;
  padding-left: 20px;
  margin: 28px 0;
  font-style: italic;
  color: #555;
}

.blog-content img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
  margin: 28px 0;
}

.blog-content hr {
  border: none;
  border-top: 1px solid var(--border-light);
  margin: 40px 0;
}
</style>

<!-- Code Copy Button Script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Find all code blocks
  const codeBlocks = document.querySelectorAll('.blog-content pre');

  codeBlocks.forEach(function(codeBlock) {
    // Create copy button
    const button = document.createElement('button');
    button.className = 'copy-code-button';
    button.textContent = 'Copy';
    button.setAttribute('aria-label', 'Copy code to clipboard');

    // Add click handler
    button.addEventListener('click', function() {
      // Get the code content (skip the button itself)
      const code = codeBlock.querySelector('code');
      const text = code ? code.textContent : codeBlock.textContent;

      // Copy to clipboard
      navigator.clipboard.writeText(text).then(function() {
        // Success feedback
        button.textContent = '✓ Copied!';
        button.classList.add('copied');

        // Reset after 2 seconds
        setTimeout(function() {
          button.textContent = 'Copy';
          button.classList.remove('copied');
        }, 2000);
      }).catch(function(err) {
        // Fallback for older browsers
        button.textContent = 'Failed';
        setTimeout(function() {
          button.textContent = 'Copy';
        }, 2000);
      });
    });

    // Insert button into code block
    codeBlock.style.position = 'relative';
    codeBlock.insertBefore(button, codeBlock.firstChild);
  });
});
</script>

{{ end }}
